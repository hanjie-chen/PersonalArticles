# tmux guide

掌握 `tmux` 的核心只有两个点：“挂起与恢复” 和 “快捷键前缀”。

Tmux 所有的快捷键操作，都必须先按一下 `Ctrl + b`（松开），然后再按具体的指令键。
## 会话管理
这是 Tmux 最核心的功能：可以在服务器上跑一个程序，断开连接回家，回家后再连上去，程序还在跑。

### 新建会话：

```bash
tmux new -s <process-name>
# 例子: tmux new -s mywork
```

暂离/挂起（Detach） —— 最常用！
*   场景：程序跑起来了，我要关掉 SSH 窗口或者去干别的，但不想程序断掉。
*   操作：先按 `Ctrl + b`，松开，再按 `d` (d = detach)

### 查看会话：

```bash
tmux ls
```

### 回到会话（Attach） 

重新连上服务器，要看刚才那个任务跑得咋样了。

```bash
tmux a -t <process-name>
# 例子: tmux a -t mywork
# 如果你只有一个会话，直接打 tmux a 也可以
```

### 彻底关闭会话：

在 tmux 的窗口中按 `Ctrl + d`（就像关掉普通终端一样），会话就结束了。

## 窗口管理（像浏览器标签页一样）
一个 Tmux 会话里可以有多个“窗口”（Window），就像浏览器里的多个标签页。

*   新建一个窗口：
    *   操作：`Ctrl + b`，然后按 `c`
    *   (记忆技巧：c = create)
    *   现象：底部状态栏会多出一个编号。

*   切换窗口：
    *   按数字切换：`Ctrl + b`，然后按 `0` 或 `1` 或 `2`...
    *   下一个窗口：`Ctrl + b`，然后按 `n` *(next)*
    *   上一个窗口：`Ctrl + b`，然后按 `p` *(previous)*

*   关闭当前窗口：
    *   输入命令 `exit` 即可。

---

### 3. 分屏（在一个屏幕里看两件事）
不用开两个 SSH 终端，直接把屏幕切开。

*   **左右分屏**：
    *   操作：`Ctrl + b`，然后按 `%` （也就是 `Shift + 5`）

*   **上下分屏**：
    *   操作：`Ctrl + b`，然后按 `"` （也就是 `Shift + '` 单引号键）

*   **在分屏之间切换光标**：
    *   操作：`Ctrl + b`，然后按 **方向键**（上/下/左/右）

---

### 4. 翻页查看历史（这很重要！）
新手最大的困扰是：Tmux 里鼠标滚轮经常滚不上去，看不了之前的日志。

*   **进入“翻页模式”**：
    *   操作：`Ctrl + b`，然后按 `[` （左中括号）
    *   *现象：右上角会出现行数显示，这时候你可以用键盘的 **PageUp / PageDown** 或者方向键来查看历史输出。*

*   **退出“翻页模式”**：
    *   操作：按 `q`
    *   *(记忆技巧：q = quit)*

---

### 极简速查表

| 功能                    | 命令 / 快捷键                   |
| :---------------------- | :------------------------------ |
| **新建会话**            | `tmux new -s <名字>`            |
| **暂时离开 (保留后台)** | `Ctrl+b` 然后按 `d`             |
| **回到会话**            | `tmux a -t <名字>`              |
| **新建窗口 (标签页)**   | `Ctrl+b` 然后按 `c`             |
| **切换窗口**            | `Ctrl+b` 然后按 `n` (下一个)    |
| **左右分屏**            | `Ctrl+b` 然后按 `%`             |
| **查看历史记录 (翻页)** | `Ctrl+b` 然后按 `[` (按 q 退出) |

掌握这些，你就已经能覆盖 95% 的日常使用了！

## 鼠标模式

tmux 默认配置鼠标滚动被视为向终端发送“上/下方向键”信号，而不是滚动查看历史缓存。

要实现像普通终端那样随心所欲地滚动，需要开启鼠标模式（Mouse Mode）。

### 立刻开启

如果现在就在会话中，想立刻滚动，可以按下快捷键进入命令模式：

1. 按下 **`Ctrl + b`**。

2. 输入 **`:`**（冒号）。

3. 输入以下命令并回车：

   ```shell
   set -g mouse on
   ```

### 永久开启

为了不用每次启动都重新设置，我们可以将其写入配置文件

```
vim ~/.tmux.conf
```

输入：
```shell
set -g mouse on
```

保存退出之后，使其生效：
```
tmux source-file ~/.tmux.conf
```

